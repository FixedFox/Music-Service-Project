# Сервис каталогизации музыки и слежения за подписками

Выпускной проект для *Java-школы Сбера* от **Горшкова Ивана**

Сервис написан с применением следующих технологий:
+ Java 11 (Adoptium OpenJDK Temurin 11)
+ Spring Boot (2.7.18) (стартеры: web, data-jpa, validation, security)
+ PostgreSQL 16
+ Junit Jupiter 5

## Как разворачиват проект
Скачать репозиторий. В файлах sql будут находится:
+ Скрип для развертки базы
+ Скрип для наполнения базы заготовленными пользователями, композициями, альбомами, жанрами и связями между ними

После заполнения базы, подключаем её через параметры в application.yaml.
Запускаем проект, по адресу localhost:8080.
Функциональность интеграции с ботом в телеграме реализована на странице _Пользователь_.
Необходимо сохранить введёный никнейм (без собачки) в поле. Нажать сохранить. Затем открыть бота, запустить его коммандой
__/start__. На странице пользователя при нажатии на ссылку _Проверить_ должна произойти привязка Аккаунта пользователя
к системе уведомлений сервиса, а так же придёт сообщение _Привет, {name}_. Если статус сменился на Подключен, значит все
в поряке.

## Функционал проекта

### Роли

+ Пользователь
+ Музыканты

### Права ролей

#### Пользователь

Пользователь собирает свою коллецию мызки из предложенного на сервисе.
Он может добавлять себе в коллекцию Композиции, а так же подписываться на Авторов, которых можно посмотреть в разделе подписки.
Для нахождения композиций, которые можно добавить в коллекцию, а также Авторов, на которых можно подписаться, предусмотрена страинца
поиска, на которой присутствует два поля: поиск композиций (ищет не только по названиям композиций, а так же по названиям альбомов,
и названиям Авторов).
Добавленные композиции можно посмотреть в разделе Библиотека, в котором они разделены по способам представления.
Раздел Библиотека -> Композиции показывает все добавленные Композиции.
Раздел Библиотека -> Альбомы отображает все альбомы, которые привязаны к композициям, а так же позволяет при нажатии на конкретное
название получить список композиций альбома, которые были добавлены.
Раздел Библиотека -> Авторы показывает все Альбомы, композиции из которых добавил пользователь.
Раздел Библиотека -> Жанры отображает все жанры композиций, которые добавил пользователь.

Раздел Поиск содержит два поля для поиска:
+ Поиск Композиций
+ Поиск Авторов

Поиск в первом поле осуществляется по введённому значению названий композиций, авторов, альбомов и ранжируется
по колличеству прослушиваний у трека, и выводит только те композиции, Альбомы с которыми опубликованы.
Чтобы увидеть все доступное в сервисе, надо оставить поле пустым. Эти композиции можно добавлять в коллекцию.

Поиск во втором поле отображает Авторов, на которых можно подписаться, чтобы получать уведомления в Telegram о публикации
их новых альбомов.

Раздел Подписки показывает Авторов, за чьими публикациями будет следить пользователь.

Так же на странице пользователя присутствует функционал смены пароля и добавления аккаунта Telegram для получения уведомлений о
публикации новых альбомов.

Ещё присутсвтует функционал добавления Авторов. Добавляя своего первого автора, пользователь получает права Музыканта.

#### Музыкант

Всё то же самое что и у пользователя, плюс у него добавляется функционал Панели музыканта. 
Она предназначена для того, чтобы добавлять композиции в сервис и собирать из этих композиций альбомы, а так же добавлять
музыкальные жанры, которые присваиваются композициям или альбомам в процессе их добавления или редактирования. Музыкант имеет
возможность распоряжаться только собственными добавленными в сервис Композициями, Альмбомами и Авторами. Жанры можно удалять 
только в том случае, если отсутствуют композиции с этим жанром (другими словами, жанр не привязан к пользователю).

## Что необходимо для запуска

Прежде всего наличие на компьютере JDK 11, и базы данных PostgreSQL 16. В проект будут приложены .sql файлы для создания схемы
базы данных, а так же файл для её демонстрационного наполнения.

По-умолчанию будут созданы 3 пользователя:

+ Музыкант, с несолькими добавленными авторами, альбомами и композициями
+ Пользователь с добавленными в его личную коллекцию композициями
+ Пустой пользователь, на котором можно проверить весь присутствующий на сервисе функционал

Так же имеется возможность самому зарегистрировать пользователя и пройти этот путь от начала до конца.